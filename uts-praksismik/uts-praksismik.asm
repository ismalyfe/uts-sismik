ORG 00H
CALL LAYAR
CALL LAMPU
RET
;-------------------------------------------
LAYAR:
AJMP MULAI

;=======LCD KONSTANTA======
DISPCLR EQU 00000001B
FUNCSET EQU 00111000B
ENTRMOD EQU 00000110B
DISPON EQU 00001100B

ORG 100H
MULAI:
LCALL INITLCD
MOV A,#80H
CALL INSTLCD
MOV DPTR,#TULISAN
CALL LCDSTRING

	;**LCD**
	  INSTLCD:
	  CLR P3.2
	  SJMP LCDOUT
	  DATALCD:SETB P3.2 
	  SJMP LCDOUT
	  LCDOUT: MOV P1,A
	  SETB P3.3
	  CLR P3.3
	  SETB P3.3
	  LCALL DELAY4
	  RET
	;**INISIALISASI LCD**
	  INITLCD:
	  MOV A,#DISPCLR
	  LCALL INSTLCD
	  LCALL DELAY4
	  MOV A,#FUNCSET
	  LCALL INSTLCD
	  LCALL DELAY4
	  MOV A,#DISPON
	  LCALL INSTLCD
	  LCALL DELAY4
	  MOV A,#ENTRMOD
	  LCALL INSTLCD
	  LCALL DELAY4
	  RET
	;**DATA KE LCD**
	  WR_DT:
	  ADD A,#30H
	  LCALL DATALCD
	  LCALL DELAY4
	  RET
	;**CETAK TULISAN**
	  PRINTSTRINGLOOP:
	  LCALL DATALCD
	  INC DPTR
	  LCDSTRING:
	  CLR A
	  MOVC A,@A+DPTR
	  JNZ PRINTSTRINGLOOP
	  RET
	;**DELAY**
	  DELAY4:
	  MOV R6,0
	  MUTER:
	  MOV R7,KEDIP
	  DJNZ R7,$
	  DJNZ R6,MUTER
	  RET
	;**TULISAN**
	  TULISAN:
	  DB '   UTS SISMIK   ',0
	  RET
;=========================
RET
;------------------------------
LAMPU:
	KEDIP EQU 5
      	KEDIP2 EQU -10000
      	MOV TMOD, #01H
      	START :
      		MOV P0,#11111110B
		ACALL DELAY
		MOV P0,#11111101B
		ACALL DELAY
		MOV P0,#11111011B
		ACALL DELAY
		MOV P0,#11110111B
		ACALL DELAY
		MOV P0,#11101111B
		ACALL DELAY
		MOV P0,#11011111B
		ACALL DELAY
		MOV P0,#10111111B
		ACALL DELAY
		MOV P0,#01111111B
		ACALL DELAY
		MOV P0,#01111110B
		ACALL DELAY
		MOV P0,#10111101B
		ACALL DELAY
		MOV P0,#11011011B
		ACALL DELAY
		MOV P0,#11100111B
		ACALL DELAY
		MOV P0,#00011000B
		ACALL DELAY
		MOV P0,#00100100B
		ACALL DELAY
		MOV P0,#01000010B
		ACALL DELAY
		MOV P0,#10000001B
		ACALL DELAY
		SJMP START
	DELAY  : MOV R0,#KEDIP
	DELAY2 : MOV TH0,HIGH KEDIP2
		 MOV Tl0,LOW KEDIP2
		 SETB TR0
	DELAY3 : JNB TF0,DELAY3
		 CLR TF0
		 CLR TF0
		 DJNZ R0,DELAY2
		 RET
	
END